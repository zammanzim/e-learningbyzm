<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Dashboard Siswa</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase-clients.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/basicfeat.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/visitor.js"></script>
    <link rel="stylesheet" href="css/styleasli.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>

    <header>
        <div class="header-left">
            <div class="hamburger" id="hamburger" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>

            <div id="visitorTrigger" class="visitor-trigger">
                <i class="fa-solid fa-eye"></i>
                <span id="headerVisitorCount">0</span>
            </div>
        </div>

        <div class="profile-box" id="profileTrigger">
            <span id="headerName">Hai, ...</span>
            <img id="headerPP" class="header-pp">
            <i class="fa-solid fa-caret-down"></i>
        </div>

        <div class="profile-dropdown" id="profileDropdown">
            <ul>
                <li onclick="goDashboard()"><i class="fa-solid fa-table-columns"></i> Dashboard</li>
                <li onclick="goProfile()"><i class="fa-solid fa-user"></i> Edit Profile</li>
                <li onclick="logout()"><i class="fa-solid fa-right-from-bracket"></i> Logout</li>
            </ul>
        </div>
    </header>

    <div id="visitorOverlay" class="visitor-overlay">
        <div class="visitor-popup">

            <div class="popup-header">
                <h3>Visitors</h3>
                <span id="closeVisitorPopup" class="close-popup">&times;</span>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <h4><i class="fa-solid fa-eye"></i> Today Visitor</h4>
                    <p id="popupToday">0</p>
                </div>
                <div class="stat-card">
                    <h4><i class="fa-solid fa-users"></i> Total Visitor</h4>
                    <p id="popupTotal">0</p>
                </div>
            </div>

            <div class="list-section">
                <h4 class="list-title">List of accounts that visited today</h4>
                <div id="visitorList" class="visitor-list-container"></div>
            </div>

            <div class="admin-actions" style="margin-top: 20px;">
                <button id="resetVisitorBtn" class="btn-reset-text">
                    <i class="fa-solid fa-rotate-right"></i> Reset Today (Admin)
                </button>
            </div>
        </div>
    </div>

    <div class="sidebar" id="sidebar"></div>
    <div id="sidebarOverlay" class="sidebar-overlay"></div>

    <div class="main-content">

        <div class="ig-profile-wrapper">

            <div class="ig-header">
                <div class="ig-pp-section">
                    <div class="ig-pp-ring">
                        <img id="dashPP" src="" class="ig-pp-img">
                    </div>
                </div>

                <div class="ig-stats-section">
                    <div class="ig-stat-item">
                        <span class="ig-stat-num" id="statMateri">0</span>
                        <span class="ig-stat-label">Posts</span>
                    </div>
                    <div class="ig-stat-item">
                        <span class="ig-stat-num" id="statDone">0</span>
                        <span class="ig-stat-label">Selesai</span>
                    </div>
                    <div class="ig-stat-item">
                        <span class="ig-stat-num" id="statClass">...</span>
                        <span class="ig-stat-label">Kelas</span>
                    </div>
                </div>
            </div>

            <div class="ig-bio-section">
                <div class="ig-fullname" id="dashFullName">Nama Lengkap</div>
                <div class="ig-bio-text">
                    <span id="dashUsername" style="color:#aaa;">@username</span><br>
                    Student at E-Learning V2 ðŸŽ“<br>
                    Keep learning, keep growing! ðŸš€
                </div>
            </div>

            <div class="ig-actions">
                <button class="ig-btn" onclick="window.location.href='settingacc.html'">Edit Profile</button>
                <button class="ig-btn" onclick="logout()">Logout</button>
            </div>

            <div class="ig-highlights">
                <div class="ig-hl-item">
                    <div class="ig-hl-ring"><i class="fa-solid fa-star"></i></div>
                    <span>Tugas</span>
                </div>
                <div class="ig-hl-item">
                    <div class="ig-hl-ring"><i class="fa-solid fa-award"></i></div>
                    <span>Nilai</span>
                </div>
            </div>

            <div class="ig-tabs">
                <div class="ig-tab active"><i class="fa-solid fa-table-cells"></i></div>
                <div class="ig-tab"><i class="fa-regular fa-bookmark"></i></div>
            </div>

            <div id="igFeed" class="ig-feed-grid">
                <div style="padding:40px; text-align:center; grid-column:1/-1;">Loading...</div>
            </div>

        </div>

        <br><br><br>
    </div>

    <script type="module">
        import { initDashboard } from './js/dashboard.js';
        initDashboard();
    </script>
</body>

</html>